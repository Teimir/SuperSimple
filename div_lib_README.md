# Библиотека деления и модуло (div_lib.sc)

Библиотека для операций деления и модуло для типов `int32` и `uint32` в языке sc.

## Функции

### Беззнаковые операции (uint32)

#### `udiv(dividend, divisor)`
Беззнаковое деление.
- **Параметры:** `dividend` (делимое), `divisor` (делитель)
- **Возвращает:** частное (uint32)
- **Пример:** `udiv(100, 7)` → `14`

#### `umod(dividend, divisor)`
Беззнаковое модуло (остаток от деления).
- **Параметры:** `dividend` (делимое), `divisor` (делитель)
- **Возвращает:** остаток (uint32)
- **Пример:** `umod(100, 7)` → `2`

#### `udiv_fast(dividend, divisor)`
Быстрое беззнаковое деление (оптимизировано для степеней двойки).
- Использует битовые сдвиги для делителей, являющихся степенями двойки
- Для остальных делителей использует обычное деление
- **Пример:** `udiv_fast(256, 8)` → `32` (использует сдвиг)

#### `umod_fast(dividend, divisor)`
Быстрое беззнаковое модуло (оптимизировано для степеней двойки).
- Использует битовую маску для делителей, являющихся степенями двойки
- **Пример:** `umod_fast(257, 8)` → `1` (использует маску)

### Знаковые операции (int32)

#### `sdiv(dividend, divisor)`
Знаковое деление.
- **Параметры:** `dividend` (делимое), `divisor` (делитель)
- **Возвращает:** частное (int32, представленное как uint32)
- **Пример:** `sdiv(-10, 2)` → `4294967291` (это `-5` в int32)

#### `smod(dividend, divisor)`
Знаковое модуло (остаток от деления).
- **Параметры:** `dividend` (делимое), `divisor` (делитель)
- **Возвращает:** остаток (int32, представленное как uint32)
- Знак результата совпадает со знаком делимого
- **Пример:** `smod(-10, 3)` → `4294967295` (это `-1` в int32)

## Особенности

1. **Обработка деления на ноль:** Все функции возвращают `0` при делении на ноль (как индикатор ошибки).

2. **Представление отрицательных чисел:** Знаковые функции возвращают значения в формате two's complement. Например:
   - `-5` в int32 = `4294967291` в uint32
   - `-1` в int32 = `4294967295` в uint32

3. **Алгоритм:** Используется алгоритм длинного деления (последовательное вычитание).

4. **Оптимизация:** Функции `*_fast` автоматически определяют степени двойки и используют битовые операции.

## Примеры использования

```sc
#include "div_lib.sc"

function main() {
    // Беззнаковое деление
    uint32 q = udiv(100, 7);    // q = 14
    uint32 r = umod(100, 7);    // r = 2
    
    // Знаковое деление
    int32 result = sdiv(-50, 3);  // result = -16 (как uint32: 4294967280)
    
    // Извлечение цифр числа
    int32 num = 12345;
    uint32 last_digit = umod(num, 10);        // 5
    uint32 second_digit = umod(udiv(num, 10), 10);  // 4
    
    return 0;
}
```

## Использование вместо встроенных операторов

В коде, который будет компилироваться, можно заменить:
- `a / b` → `udiv(a, b)` или `sdiv(a, b)`
- `a % b` → `umod(a, b)` или `smod(a, b)`

Например, в `test6.sc`:
```sc
// Вместо: arr1[1] = 48 + (a % 1000000000) / 100000000;
arr1[1] = 48 + udiv(umod(a, 1000000000), 100000000);
```

## Тестирование

Все функции протестированы в `user_examples/math_test/test_div_lib.sc`.
